# HistoryLens ‚Äî Time Travel with Your Photos

**HistoryLens** lets you unleash creative magic: upload a photo (selfie, object, or location), and watch it transform into historical or futuristic styles using **Google Gemini‚ÄØ2.5 Flash Image**. Add text-driven edits, generate narrated slideshows via **ElevenLabs TTS**, stitch together shareable galleries, and download your results‚Äîall in one browser-powered web app. Even without API keys, you can try the experience in **demo mode**.

Built using **Next.js (React)**, **Node.js/Express**, **Gemini 2.5 Flash Image**, **ElevenLabs TTS**, **ffmpeg**, and fully orchestrated with **Docker** and **docker-compose**.

---

## üìë Table of Contents

1. [Features](#features)
2. [Prerequisites](#prerequisites)
3. [Setup & Installation](#setup--installation)

   * [With Docker Compose](#option-a-using-docker-compose)
   * [Local Development](#option-b-local-development)
4. [Configuration](#configuration)
5. [Usage Workflow](#usage-workflow)
6. [Demo Mode (No API Keys)](#demo-mode-no-api-keys)
7. [Command Reference](#command-reference)
8. [Troubleshooting](#troubleshooting)
9. [Project Structure](#project-structure)
10. [Kaggle Submission Checklist](#kaggle-submission-checklist)
11. [Contributing](#contributing)
12. [License & Credits](#license--credits)

---

## ‚ú® 1. Features

* **Time-travel image rendering**
  Transform your photos into Ancient, Medieval, or Futuristic versions.

* **Prompt-driven edits**
  Use natural language like:

  ```
  "Add a medieval castle in the background"
  "Turn this person into a Roman warrior"
  ```

* **Narrated slideshow generation**
  Create slideshows with captions and narration generated by **ElevenLabs** and rendered with **ffmpeg**.

* **Exportable results**
  Download single images or narrated video slideshows.

* **No credentials required**
  Demo mode provides full exploration without API keys.

* **Fully containerized**
  Docker + Docker Compose ensures reproducible environments.

---

## üîß 2. Prerequisites

Ensure you have:

```bash
# For containerized usage
docker
# For orchestration
docker-compose

# For local (non-dockerized) usage
node -v   # Node.js v18+
ffmpeg -version  # ffmpeg available on PATH
```

---

## üöÄ 3. Setup & Installation

### Option A: Using Docker Compose (Recommended)

```bash
git clone https://github.com/sukanyaghosh74/history-lens.git
cd history-lens

# Copy environment variables template
cp .env.example .env

# Open .env and configure (see Configuration section)

# Build and run
docker-compose up --build
```

Access frontend at: **[http://localhost:3000](http://localhost:3000)**
Backend runs at: **[http://localhost:5000](http://localhost:5000)**

---

### Option B: Local Development (Manual)

```bash
git clone https://github.com/sukanyaghosh74/history-lens.git
cd history-lens

npm install
cp .env.example .env
# Edit .env with your API keys

npm run dev
```

---

## ‚öôÔ∏è 4. Configuration

Open `.env` file and set:

```ini
# Required for AI image transformations
GEMINI_API_KEY=your_google_gemini_key_here

# Optional: narration in slideshows
ELEVENLABS_API_KEY=your_elevenlabs_key_here

# Verbose logs (optional)
LOG_LEVEL=debug
```

If no `GEMINI_API_KEY` is provided, the app defaults to **demo mode**.

---

## üé® 5. Usage Workflow

1. **Upload an Image**
   Supported: `.jpg`, `.png`, `.webp` (max 10MB).

   Example (local dev):

   ```bash
   curl -X POST -F "file=@myphoto.jpg" http://localhost:5000/api/upload
   ```

2. **Apply Styles**

   * Ancient
   * Medieval
   * Futuristic

   Example:

   ```bash
   curl -X POST http://localhost:5000/api/style \
        -H "Content-Type: application/json" \
        -d '{"imageId": "12345", "style": "futuristic"}'
   ```

3. **Text-Driven Edits**
   Example:

   ```bash
   curl -X POST http://localhost:5000/api/edit \
        -H "Content-Type: application/json" \
        -d '{"imageId": "12345", "prompt": "Add a spaceship"}'
   ```

4. **Generate a Narrated Slideshow**
   Example:

   ```bash
   curl -X POST http://localhost:5000/api/slideshow \
        -H "Content-Type: application/json" \
        -d '{"images": ["id1", "id2"], "captions": ["Rome in 150 AD", "Future Mars Colony"]}'
   ```

5. **Download Results**
   Download images or `.mp4` slideshow from the frontend or API endpoint.

---

## üß™ 6. Demo Mode (No API Keys)

Without any configuration, you can:

* Click **‚ÄúTry Sample Images‚Äù** on the homepage.
* Explore historical/futuristic renderings.
* Preview pre-generated slideshows with captions.

Perfect for quick demos or environments without internet access.

---

## üíª 7. Command Reference

| Action                  | Command Example                                                |
| ----------------------- | -------------------------------------------------------------- |
| Clone repo              | `git clone https://github.com/sukanyaghosh74/history-lens.git` |
| Navigate to repo        | `cd history-lens`                                              |
| Copy env file           | `cp .env.example .env`                                         |
| Build + run Docker      | `docker-compose up --build`                                    |
| Run locally (no Docker) | `npm run dev`                                                  |
| Enable verbose logs     | `LOG_LEVEL=debug` in `.env`                                    |
| Stop containers         | `docker-compose down`                                          |

---

## üõ†Ô∏è 8. Troubleshooting

* **429 Too Many Requests** (Gemini):
  API rate limit reached ‚Üí wait and retry.

* **TTS not working**:
  Missing `ELEVENLABS_API_KEY` ‚Üí narration skipped gracefully.

* **ffmpeg errors**:
  Ensure `ffmpeg` installed (`ffmpeg -version`) or run via Docker where it‚Äôs pre-bundled.

* **Frontend not loading**:
  Make sure you visit `http://localhost:3000` and not the backend port.

---

## üìÇ 9. Project Structure

```bash
history-lens/
‚îú‚îÄ‚îÄ frontend/             # Next.js React frontend
‚îú‚îÄ‚îÄ backend/              # Express backend APIs
‚îú‚îÄ‚îÄ Dockerfile.frontend   # Frontend container
‚îú‚îÄ‚îÄ Dockerfile.backend    # Backend container
‚îú‚îÄ‚îÄ docker-compose.yml    # Multi-container orchestration
‚îú‚îÄ‚îÄ .env.example          # Env template
‚îú‚îÄ‚îÄ demo_script.txt       # Guided demo instructions
‚îú‚îÄ‚îÄ kaggle_writeup.md     # Kaggle submission notes
‚îî‚îÄ‚îÄ README.md             # This file
```

---

## üìã 10. Kaggle Submission Checklist

* [ ] Add **video demo** using `demo_script.txt`
* [ ] Provide **public demo link** or GitHub URL
* [ ] Write **200-word summary** of Gemini integration (`kaggle_writeup.md`)
* [ ] Package repo cleanly with `requirements.txt` or Docker

---

## ü§ù 11. Contributing

1. Fork the repository
2. Create a new branch:

   ```bash
   git checkout -b feature/amazing-feature
   ```
3. Commit changes:

   ```bash
   git commit -m "Add amazing feature"
   ```
4. Push branch:

   ```bash
   git push origin feature/amazing-feature
   ```
5. Open a Pull Request

---

## üìú 12. License & Credits

* **License**: MIT
* **Credits**:

  * [Google Gemini 2.5 Flash Image](https://deepmind.google/technologies/gemini/)
  * [ElevenLabs TTS](https://elevenlabs.io/)
  * [ffmpeg](https://ffmpeg.org/)

---

### üöÄ Final Note

HistoryLens is more than an app‚Äîit‚Äôs a **storytelling machine**. Whether you‚Äôre pitching on Kaggle, teaching history with visuals, or just having fun, this project shows the power of combining **AI vision, narration, and web tech** in a single seamless workflow.
